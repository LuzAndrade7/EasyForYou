<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>EasyForYou - Dashboard</title>
  <link rel="stylesheet" href="./styles.css" />
</head>
<body>
  <header class="app-header">
    <h1>EasyForYou</h1>
    <div class="header-right">
      <span id="welcome">Cargando...</span>
      <button id="logoutBtn" class="btn-logout">Cerrar sesi贸n</button>
    </div>
  </header>

  <nav class="tab-nav">
    <button class="tab-btn active" data-tab="usuario">USUARIO</button>
    <button class="tab-btn" data-tab="mascota">MASCOTA</button>
    <button class="tab-btn" data-tab="contenidos">CONTENIDOS</button>
    <button class="tab-btn" data-tab="ejercicios">EJERCICIOS</button>
    <button class="tab-btn" data-tab="archivo">ARCHIVO</button>
  </nav>

  <main class="container">
    <!-- Tab USUARIO -->
    <section class="tab-content active" id="tab-usuario">
      <div class="card">
        <h2> Usuario</h2>
        <div id="userInfo">
          <p>Cargando informaci贸n del usuario...</p>
        </div>
      </div>
    </section>

    <!-- Tab MASCOTA -->
    <section class="tab-content" id="tab-mascota">
      <div class="card">
        <h2> Mascota</h2>
        <div id="petInfo">
          <p>Cargando informaci贸n de la mascota...</p>
        </div>
      </div>
    </section>

    <!-- Tab CONTENIDOS -->
    <section class="tab-content" id="tab-contenidos">
      <div class="contenidos-wrapper">
        <div class="contenidos-header">
          <span class="contenidos-title">CONTENIDOS</span>
        </div>
        <div class="content-grid">
          <!-- Fila 1 -->
          <a href="./topic-1.html" class="content-card red">
            <span class="content-text">SEGMENTACIN DEL MERCADO</span>
            <span class="plus-btn">+</span>
          </a>
          <a href="./topic-2.html" class="content-card orange">
            <span class="content-text">MARGEN DE GANANCIA</span>
            <span class="plus-btn">+</span>
          </a>
          <a href="./topic-3.html" class="content-card yellow">
            <span class="content-text">PRECIO DE VENTA UNITARIO</span>
            <span class="plus-btn">+</span>
          </a>
          <!-- Fila 2 -->
          <a href="./topic-4.html" class="content-card blue">
            <span class="content-text">PUNTO DE EQUILIBRIO</span>
            <span class="plus-btn">+</span>
          </a>
          <a href="#" class="content-card cyan">
            <span class="content-text"></span>
            <span class="plus-btn">+</span>
          </a>
          <a href="#" class="content-card lightblue">
            <span class="content-text"></span>
            <span class="plus-btn">+</span>
          </a>
        </div>
      </div>
    </section>

    <!-- Tab EJERCICIOS -->
<section class="tab-content" id="tab-ejercicios">
  <div class="calculadoras-wrapper">
    <div class="calculadoras-header">
      <span class="calculadoras-title">CALCULADORAS</span>
    </div>
    <div class="calc-grid">
      <button class="calc-card orange" onclick="openCalcModal('margenGanancia')">
        <span class="calc-icon"></span>
        <span class="calc-text">MARGEN DE GANANCIA</span>
      </button>
      <button class="calc-card yellow" onclick="openCalcModal('precioVenta')">
        <span class="calc-icon"></span>
        <span class="calc-text">PRECIO DE VENTA UNITARIO</span>
      </button>
      <button class="calc-card blue" onclick="openCalcModal('puntoEquilibrio')">
        <span class="calc-icon">锔</span>
        <span class="calc-text">PUNTO DE EQUILIBRIO</span>
      </button>
    </div>
  </div>

  <!-- Modal Calculadora Margen de Ganancia -->
  <div id="calcModal-margenGanancia" class="calc-modal">
    <div class="calc-modal-content">
      <button class="calc-modal-close" onclick="closeCalcModal('margenGanancia')">&times;</button>
      <h2 class="calc-modal-title">Margen de Ganancia</h2>
      <p class="calc-formula">F贸rmula: ((Precio de Venta - Costo) / Precio de Venta)  100</p>
      
      <div class="calc-inputs">
        <div class="input-with-info">
          <label for="mg-precioVenta">Precio de Venta ($)</label>
          <input type="number" id="mg-precioVenta" placeholder="Ej: 100" step="0.01" min="0">
          <button class="info-btn" onclick="showInfo(this, 'mg-precioVenta-info')">i</button>
          <div id="mg-precioVenta-info" class="info-tooltip">
            Precio al que vendes tu producto o servicio al cliente final.
          </div>
        </div>
        
        <div class="input-with-info">
          <label for="mg-costo">Costo ($)</label>
          <input type="number" id="mg-costo" placeholder="Ej: 60" step="0.01" min="0">
          <button class="info-btn" onclick="showInfo(this, 'mg-costo-info')">i</button>
          <div id="mg-costo-info" class="info-tooltip">
            Costo total de producir o adquirir el producto, incluyendo materiales, mano de obra y gastos directos.
          </div>
        </div>
      </div>
      
      <button class="calc-btn" onclick="calcularMargenGanancia()">Calcular</button>
      <div id="resultado-margenGanancia" class="calc-resultado"></div>
    </div>
  </div>

  <!-- Modal Calculadora Precio de Venta Unitario -->
  <div id="calcModal-precioVenta" class="calc-modal">
    <div class="calc-modal-content">
      <button class="calc-modal-close" onclick="closeCalcModal('precioVenta')">&times;</button>
      <h2 class="calc-modal-title">Precio de Venta Unitario</h2>
      <p class="calc-formula">F贸rmula: (Costo Total / Unidades)  (1 + Margen/100)</p>
      
      <div class="calc-inputs">
        <div class="input-with-info">
          <label for="pv-costoTotal">Costo Total de Producci贸n ($)</label>
          <input type="number" id="pv-costoTotal" placeholder="Ej: 1000" step="0.01" min="0">
          <button class="info-btn" onclick="showInfo(this, 'pv-costoTotal-info')">i</button>
          <div id="pv-costoTotal-info" class="info-tooltip">
            Suma de todos los costos para producir el lote completo (materiales, mano de obra, empaque, etc.).
          </div>
        </div>
        
        <div class="input-with-info">
          <label for="pv-unidades">Unidades Producidas</label>
          <input type="number" id="pv-unidades" placeholder="Ej: 50" step="1" min="1">
          <button class="info-btn" onclick="showInfo(this, 'pv-unidades-info')">i</button>
          <div id="pv-unidades-info" class="info-tooltip">
            N煤mero total de productos fabricados en este lote de producci贸n.
          </div>
        </div>
        
        <div class="input-with-info">
          <label for="pv-margen">Margen de Ganancia Deseado (%)</label>
          <input type="number" id="pv-margen" placeholder="Ej: 30" step="0.01" min="0">
          <button class="info-btn" onclick="showInfo(this, 'pv-margen-info')">i</button>
          <div id="pv-margen-info" class="info-tooltip">
            Porcentaje de ganancia que deseas obtener sobre el costo unitario.
          </div>
        </div>
      </div>
      
      <button class="calc-btn" onclick="calcularPrecioVenta()">Calcular</button>
      <div id="resultado-precioVenta" class="calc-resultado"></div>
    </div>
  </div>

  <!-- Modal Calculadora Punto de Equilibrio -->
  <div id="calcModal-puntoEquilibrio" class="calc-modal">
    <div class="calc-modal-content">
      <button class="calc-modal-close" onclick="closeCalcModal('puntoEquilibrio')">&times;</button>
      <h2 class="calc-modal-title">Punto de Equilibrio</h2>
      <p class="calc-formula">F贸rmula: Costos Fijos / (Precio de Venta - Costo Variable Unitario)</p>
      
      <div class="calc-inputs">
        <div class="input-with-info">
          <label for="pe-costosFijos">Costos Fijos Totales ($)</label>
          <input type="number" id="pe-costosFijos" placeholder="Ej: 5000" step="0.01" min="0">
          <button class="info-btn" onclick="showInfo(this, 'pe-costosFijos-info')">i</button>
          <div id="pe-costosFijos-info" class="info-tooltip">
            Costos que posee una empresa m谩s all谩 de la producci贸n obtenida. Su valor no var铆a seg煤n lo producido (alquiler, salarios, servicios b谩sicos, seguros).
          </div>
        </div>
        
        <div class="input-with-info">
          <label for="pe-precioVenta">Precio de Venta Unitario ($)</label>
          <input type="number" id="pe-precioVenta" placeholder="Ej: 50" step="0.01" min="0">
          <button class="info-btn" onclick="showInfo(this, 'pe-precioVenta-info')">i</button>
          <div id="pe-precioVenta-info" class="info-tooltip">
            Precio al que vendes cada unidad de tu producto o servicio.
          </div>
        </div>
        
        <div class="input-with-info">
          <label for="pe-costoVariable">Costo Variable Unitario ($)</label>
          <input type="number" id="pe-costoVariable" placeholder="Ej: 20" step="0.01" min="0">
          <button class="info-btn" onclick="showInfo(this, 'pe-costoVariable-info')">i</button>
          <div id="pe-costoVariable-info" class="info-tooltip">
            Costo que var铆a seg煤n la cantidad producida (materiales, empaque, comisiones por venta, transporte). Por cada unidad adicional, este costo aumenta proporcionalmente.
          </div>
        </div>
      </div>
      
      <button class="calc-btn" onclick="calcularPuntoEquilibrio()">Calcular</button>
      <div id="resultado-puntoEquilibrio" class="calc-resultado"></div>
    </div>
  </div>
</section>


    <!-- Tab ARCHIVO -->
    <section class="tab-content" id="tab-archivo">
      <div class="card">
        <h2> Archivo</h2>
        <div id="archiveList">
          <p>Pr贸ximamente: Historial y archivos guardados</p>
        </div>
      </div>
    </section>
  </main>

  <!-- Modal Calculadora Margen de Ganancia -->
  <div id="calcModal-margenGanancia" class="calc-modal">
    <div class="calc-modal-content">
      <button class="calc-modal-close" onclick="closeCalcModal('margenGanancia')">&times;</button>
      <h2 class="calc-modal-title"> Margen de Ganancia</h2>
      <p class="calc-formula">F贸rmula: ((Precio de Venta - Costo) / Precio de Venta)  100</p>
      <div class="calc-inputs">
        <label>
          Precio de Venta ($)
          <input type="number" id="mg-precioVenta" placeholder="Ej: 100" step="0.01" min="0">
        </label>
        <label>
          Costo ($)
          <input type="number" id="mg-costo" placeholder="Ej: 60" step="0.01" min="0">
        </label>
      </div>
      <button class="calc-btn" onclick="calcularMargenGanancia()">Calcular</button>
      <div id="resultado-margenGanancia" class="calc-resultado"></div>
    </div>
  </div>

  <!-- Modal Calculadora Precio de Venta Unitario -->
  <div id="calcModal-precioVenta" class="calc-modal">
    <div class="calc-modal-content">
      <button class="calc-modal-close" onclick="closeCalcModal('precioVenta')">&times;</button>
      <h2 class="calc-modal-title"> Precio de Venta Unitario</h2>
      <p class="calc-formula">F贸rmula: (Costo Total / Unidades)  (1 + Margen/100)</p>
      <div class="calc-inputs">
        <label>
          Costo Total de Producci贸n ($)
          <input type="number" id="pv-costoTotal" placeholder="Ej: 1000" step="0.01" min="0">
        </label>
        <label>
          Unidades Producidas
          <input type="number" id="pv-unidades" placeholder="Ej: 50" step="1" min="1">
        </label>
        <label>
          Margen de Ganancia Deseado (%)
          <input type="number" id="pv-margen" placeholder="Ej: 30" step="0.01" min="0">
        </label>
      </div>
      <button class="calc-btn" onclick="calcularPrecioVenta()">Calcular</button>
      <div id="resultado-precioVenta" class="calc-resultado"></div>
    </div>
  </div>

  <!-- Modal Calculadora Punto de Equilibrio -->
  <div id="calcModal-puntoEquilibrio" class="calc-modal">
    <div class="calc-modal-content">
      <button class="calc-modal-close" onclick="closeCalcModal('puntoEquilibrio')">&times;</button>
      <h2 class="calc-modal-title">锔 Punto de Equilibrio</h2>
      <p class="calc-formula">F贸rmula: Costos Fijos / (Precio de Venta - Costo Variable Unitario)</p>
      <div class="calc-inputs">
        <label>
          Costos Fijos Totales ($)
          <input type="number" id="pe-costosFijos" placeholder="Ej: 5000" step="0.01" min="0">
        </label>
        <label>
          Precio de Venta Unitario ($)
          <input type="number" id="pe-precioVenta" placeholder="Ej: 50" step="0.01" min="0">
        </label>
        <label>
          Costo Variable Unitario ($)
          <input type="number" id="pe-costoVariable" placeholder="Ej: 20" step="0.01" min="0">
        </label>
      </div>
      <button class="calc-btn" onclick="calcularPuntoEquilibrio()">Calcular</button>
      <div id="resultado-puntoEquilibrio" class="calc-resultado"></div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="./js/supabaseClient.js"></script>
  <script src="./js/app.js"></script>
</body>
</html>
