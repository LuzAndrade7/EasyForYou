<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Punto de Equilibrio - EasyForYou</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: #FDBA74;
      min-height: 100vh;
    }

    .topic-container {
      max-width: 1000px;
      margin: 0 auto;
      padding: 20px;
    }

    /* Título principal */
    .main-title {
      background: #ffffff;
      border: 3px solid #001F8B;
      border-radius: 30px;
      padding: 15px 40px;
      text-align: center;
      font-size: 24px;
      font-weight: bold;
      color: #000000;
      margin: 20px auto 20px;
      max-width: 500px;
    }

    /* Sección de fórmula */
    .formula-section {
      text-align: center;
      margin: 30px 0;
    }

    .formula-label {
      font-size: 22px;
      font-weight: bold;
      color: #000000;
      margin-bottom: 20px;
      text-decoration: underline;
    }

    .formula-image {
      width: 100%;
      max-width: 1000px;
      display: block;
      margin: 0 auto;
    }

    /* Cuadro ¿QUÉ ES? (no es botón) */
    .que-es-box {
      background: #F89B54;
      color: #ffffff;
      padding: 25px;
      border-radius: 12px;
      border: 3px solid #001F8B;
      text-align: left;
      box-shadow: 0 4px 0 #001F8B;
      margin: 40px auto;
      max-width: 800px;
    }

    .que-es-title {
      font-size: 24px;
      font-weight: bold;
      margin-bottom: 15px;
      text-align: center;
      color: #ffffff;
    }

    .que-es-content {
      font-size: 16px;
      line-height: 1.6;
    }

    /* Contenedor de botones */
    .buttons-container {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 20px;
      margin: 40px 0;
      max-width: 900px;
      margin-left: auto;
      margin-right: auto;
      justify-content: center;
    }

    /* Botones generales */
    .info-button {
      background: #F89B54;
      color: #333333;
      padding: 20px 15px;
      border-radius: 12px;
      border: 3px solid #001F8B;
      position: relative;
      box-shadow: 0 4px 0 #001F8B;
      cursor: pointer;
      transition: all 0.3s;
      text-align: center;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      height: 50px; 
      width: 280px;
    }

    .info-button:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 0 #001F8B;
      background: #F67E1D;
    }

    .info-button:active {
      transform: translateY(0);
      box-shadow: 0 2px 0 #001F8B;
    }

    /* Colores específicos para cada botón */
    .button-importancia {
      background: #0828DB;
      color: white;
    }

    .button-elementos {
      background: #0828DB;
      color: white;
    }

    .button-grafico {
      background: #0828DB;
      color: white;
    }

    .button-importancia:hover { background: #2D53B8; }
    .button-elementos:hover { background: #2D53B8; }
    .button-grafico:hover { background: #2D53B8; }

    .button-title {
      font-size: 20px;
      font-weight: bold;
      margin: 0;
      text-align: center;
    }

    .button-plus {
      position: absolute;
      right: 15px;
      top: 50%;
      transform: translateY(-50%);
      background: #001F8B;
      color: white;
      width: 32px;
      height: 32px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
      font-weight: bold;
      border: 2px solid white;
    }

    /* Botón volver */
    .back-btn {
      display: inline-flex;
      align-items: center;
      gap: 12px;
      background: #F89B54;
      color: #FFFFFF;
      padding: 14px 35px;
      border-radius: 8px;
      text-decoration: none;
      font-weight: bold;
      border: 2px solid #001F8B;
      cursor: pointer;
      box-shadow: 0 4px 0 #001F8B;
      transition: all 0.3s;
    }

    .back-btn:hover {
      background: #F67E1D;
      transform: translateY(-2px);
      box-shadow: 0 6px 0 #001F8B;
    }

    .back-btn img {
      width: 16px;
      height: 16px;
    }

    /* Barra de navegación superior */
    .top-nav {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }

    .continue-btn {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      background: #0828DB;
      color: white;
      padding: 10px 20px;
      border-radius: 8px;
      text-decoration: none;
      font-weight: bold;
      border: 2px solid #001F8B;
      cursor: pointer;
    }

    .continue-btn:hover {
      background: #001F8B;
    }

    .btn-container {
      display: none;
    }

    /* Popups / Ventanas emergentes */
    .popup {
      display: none;
      position: fixed;
      z-index: 1000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0,0,0,0.7);
      animation: fadeIn 0.3s;
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    .popup-content {
      background-color: #fff;
      margin: 50px auto;
      padding: 30px;
      border-radius: 15px;
      width: 90%;
      max-width: 600px;
      position: relative;
      border: 3px solid #001F8B;
      box-shadow: 0 10px 30px rgba(0,0,0,0.3);
      animation: slideIn 0.3s;
      max-height: 80vh;
      overflow-y: auto;
    }

    @keyframes slideIn {
      from { transform: translateY(-50px); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }

    .popup-close {
      position: absolute;
      top: 15px;
      right: 20px;
      font-size: 28px;
      font-weight: bold;
      color: #333333;
      cursor: pointer;
      background: none;
      border: none;
    }

    .popup-close:hover {
      color: #F67E1D;
    }

    .popup-title {
      font-size: 24px;
      font-weight: bold;
      margin-bottom: 25px;
      color: #2D53B8;
      padding-bottom: 10px;
      border-bottom: 2px solid #F89B54;
      text-align: center;
    }

    .popup-body {
      font-size: 16px;
      line-height: 1.6;
      color: #333333;
    }

    /* Lista de elementos clave */
    .elements-list {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    .element-item {
      margin-bottom: 15px;
      padding: 15px;
      background: #f8f9fa;
      border-radius: 8px;
      border-left: 4px solid #0828DB;
    }

    .element-title {
      font-weight: bold;
      color: #2D53B8;
      margin-bottom: 5px;
      font-size: 17px;
    }

    .element-desc {
      font-size: 15px;
      color: #333333;
      line-height: 1.5;
    }

    /* Estilos para el gráfico en popup */
    .graphic-explanation {
      background: #E0E0E0;
      padding: 20px;
      border-radius: 10px;
      margin: 20px 0;
    }

    .line-item {
      display: flex;
      align-items: center;
      margin: 10px 0;
    }

    .line-color {
      width: 30px;
      height: 4px;
      margin-right: 15px;
      border-radius: 2px;
    }

    .line-red { background: #f61d1d; }
    .line-green { background: #4CAF50; }
    .line-blue { background: #0a1f91; }
    .line-yellow { background: #ffee00; }

    /* Responsividad */
    @media (max-width: 900px) {
      .buttons-container {
        grid-template-columns: 1fr;
        gap: 20px;
        max-width: 400px;
      }
      
      .formula-image {
        max-width: 500px;
      }
      
      .info-button {
        height: 90px;
        padding: 18px 15px;
      }
      
      .popup-content {
        width: 95%;
        margin: 20px auto;
        padding: 20px;
      }
      
      .main-title {
        font-size: 20px;
        padding: 12px 25px;
      }
      
      .button-title {
        font-size: 18px;
      }
      
      .que-es-box {
        margin: 30px auto;
        padding: 20px;
      }
    }

    @media (max-width: 768px) {
      .formula-image {
        max-width: 90%;
      }
    }

    @media (max-width: 480px) {
      .button-title {
        font-size: 17px;
      }
      
      .button-plus {
        width: 28px;
        height: 28px;
        font-size: 18px;
        right: 12px;
      }
      
      .que-es-box {
        padding: 18px;
      }
      
      .que-es-title {
        font-size: 22px;
      }
    }
  </style>
</head>
<body>
  <div class="topic-container">
    <!-- Barra de navegación superior -->
    <div class="top-nav">
      <button onclick="if(window.parent && window.parent.closeTopicModal) { window.parent.closeTopicModal(); } else { window.location.href='./app.html'; }" class="back-btn">
        <img src="./images/back.png" alt="Volver"> Volver
      </button>
      <button class="continue-btn" onclick="alert('¡Próximamente!')">
        Continuar ➜
      </button>
    </div>

    <!-- Título de la sección -->
    <div class="main-title">PUNTO DE EQUILIBRIO</div>
    
    <!-- Sección de fórmula -->
    <div class="formula-section">
      <div class="formula-label">FÓRMULA</div>
      <img src="./images/FpuntoEquilibrio.png" alt="Fórmula Punto de Equilibrio" class="formula-image">
    </div>
    
    <!-- Cuadro ¿QUÉ ES? (no es botón) -->
    <div class="que-es-box">
      <div class="que-es-title">¿QUÉ ES?</div>
      <div class="que-es-content">
        <p>El punto de equilibrio es el nivel de ventas en el que los ingresos totales son iguales a los costos totales, lo que significa que no hay pérdidas ni ganancias.</p>
        
        <p>En otras palabras, es el momento en que un negocio:</p>
        <ul>
          <li>Ha cubierto todos sus gastos (costos fijos y variables)</li>
          <li>No está perdiendo dinero</li>
          <li>Aún no está generando utilidades</li>
          <li>A partir de este punto, cada venta adicional genera ganancias</li>
        </ul>
      </div>
    </div>
    
    <!-- Grid de 3 botones -->
    <div class="buttons-container">
      <!-- IMPORTANCIA -->
      <div class="info-button button-importancia" onclick="openPopup('popupIMPORTANCIA')">
        <div class="button-title">IMPORTANCIA</div>
        <div class="button-plus">+</div>
      </div>
      
      <!-- ELEMENTOS CLAVE -->
      <div class="info-button button-elementos" onclick="openPopup('popupELEMENTOS')">
        <div class="button-title">ELEMENTOS CLAVE</div>
        <div class="button-plus">+</div>
      </div>
      
      <!-- GRÁFICO -->
      <div class="info-button button-grafico" onclick="openPopup('popupGRAFICO')">
        <div class="button-title">GRÁFICO</div>
        <div class="button-plus">+</div>
      </div>
    </div>

    <!-- Botón de regresar -->
    <div class="btn-container">
      <button onclick="if(window.parent && window.parent.closeTopicModal) { window.parent.closeTopicModal(); } else { window.location.href='./app.html'; }" class="back-btn">
        <img src="./images/back.png" alt="Volver"> 
        <span>Volver</span>
      </button>
    </div>
  </div>

  <!-- Popup de IMPORTANCIA -->
  <div id="popupIMPORTANCIA" class="popup">
    <div class="popup-content">
      <span class="popup-close" onclick="closePopup('popupIMPORTANCIA')">&times;</span>
      <div class="popup-title">IMPORTANCIA DEL PUNTO DE EQUILIBRIO</div>
      <div class="popup-body">
        <p><strong>Calcular el punto de equilibrio ayuda a:</strong></p>
        
        <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; margin: 20px 0;">
          <div style="display: flex; align-items: flex-start; margin-bottom: 15px;">
            <div style="background: #37B5FF; color: white; width: 30px; height: 30px; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-right: 15px; flex-shrink: 0;">1</div>
            <div>
              <strong>Saber cuánto necesitas vender para no perder dinero</strong>
              <p style="margin: 5px 0 0 0;">Conoces la cantidad mínima de productos/servicios que debes vender para cubrir todos tus costos.</p>
            </div>
          </div>
          
          <div style="display: flex; align-items: flex-start; margin-bottom: 15px;">
            <div style="background: #37B5FF; color: white; width: 30px; height: 30px; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-right: 15px; flex-shrink: 0;">2</div>
            <div>
              <strong>Tomar decisiones sobre precios y costos</strong>
              <p style="margin: 5px 0 0 0;">Puedes ajustar precios o reducir costos para alcanzar más rápido el punto de equilibrio.</p>
            </div>
          </div>
          
          <div style="display: flex; align-items: flex-start; margin-bottom: 15px;">
            <div style="background: #37B5FF; color: white; width: 30px; height: 30px; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-right: 15px; flex-shrink: 0;">3</div>
            <div>
              <strong>Planificar tus metas de ventas</strong>
              <p style="margin: 5px 0 0 0;">Estableces objetivos realistas de ventas basados en datos concretos, no en suposiciones.</p>
            </div>
          </div>
          
          <div style="display: flex; align-items: flex-start;">
            <div style="background: #37B5FF; color: white; width: 30px; height: 30px; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-right: 15px; flex-shrink: 0;">4</div>
            <div>
              <strong>Evaluar la viabilidad de tu negocio</strong>
              <p style="margin: 5px 0 0 0;">Determinas si tu modelo de negocio es sostenible a largo plazo.</p>
            </div>
          </div>
        </div>
        
        <p style="background: #e8f5e9; padding: 15px; border-radius: 8px; border-left: 4px solid #10b981;">
          <strong>Beneficio adicional:</strong> Te da una visión clara de cuándo comenzarás a obtener ganancias, lo que es crucial para planificar inversiones y crecimiento.
        </p>
      </div>
    </div>
  </div>

  <!-- Popup de ELEMENTOS CLAVE -->
  <div id="popupELEMENTOS" class="popup">
    <div class="popup-content">
      <span class="popup-close" onclick="closePopup('popupELEMENTOS')">&times;</span>
      <div class="popup-title">ELEMENTOS CLAVE PARA CALCULAR EL PUNTO DE EQUILIBRIO</div>
      <div class="popup-body">
        <ul class="elements-list">
          <li class="element-item">
            <div class="element-title">Costos fijos</div>
            <div class="element-desc">
              Son aquellos costos que no cambian aunque vendas más o menos. Se mantienen constantes independientemente del nivel de producción o ventas.
              <br><strong>Ejemplos:</strong> alquiler, luz, salarios fijos, seguros, impuestos fijos.
            </div>
          </li>
          
          <li class="element-item">
            <div class="element-title">Costos variables</div>
            <div class="element-desc">
              Son aquellos costos que dependen de la cantidad vendida o producida. Aumentan cuando produces/vendes más y disminuyen cuando produces/vendes menos.
              <br><strong>Ejemplos:</strong> materias primas, embalajes, comisiones por ventas, transporte por unidad.
            </div>
          </li>
          
          <li class="element-item">
            <div class="element-title">Precio de venta unitario</div>
            <div class="element-desc">
              Es el precio al que vendes cada unidad de tu producto o servicio. Este valor determina cuánto ingreso generas por cada venta.
            </div>
          </li>
          
          <li class="element-item">
            <div class="element-title">Margen de contribución</div>
            <div class="element-desc">
              Es la diferencia entre el precio de venta y el costo variable unitario. Representa cuánto contribuye cada venta a cubrir los costos fijos.
              <br><strong>Fórmula:</strong> Margen = Precio Venta - Costo Variable Unitario
            </div>
          </li>
        </ul>
      </div>
    </div>
  </div>

  <!-- Popup de GRÁFICO -->
  <div id="popupGRAFICO" class="popup">
    <div class="popup-content">
      <span class="popup-close" onclick="closePopup('popupGRAFICO')">&times;</span>
      <div class="popup-title">GRÁFICO DEL PUNTO DE EQUILIBRIO</div>
      <div class="popup-body">
        <div style="text-align: center; margin: 20px 0;">
          <img src="./images/PuntoEqulibrio.png" alt="Gráfico Punto de Equilibrio" style="width: 400px; max-width: 550px; border-radius: 10px; padding: 10px;">
        </div>
        
        <div class="graphic-explanation">
          <h4 style="margin-top: 0; color: #333; text-align: center;">ELEMENTOS DEL GRÁFICO:</h4>
          
          <div class="line-item">
            <div class="line-color line-red"></div>
            <div>
              <strong>Línea horizontal roja →</strong> Costos fijos (se mantienen constantes)
            </div>
          </div>
          
          <div class="line-item">
            <div class="line-color line-yellow"></div>
            <div>
              <strong>Línea inclinada amarilla →</strong> Costos variables (aumentan con la producción)
            </div>
          </div>
          
          <div class="line-item">
            <div class="line-color line-green"></div>
            <div>
              <strong>Línea inclinada verde →</strong> Costos totales (costos fijos + costos variables)
            </div>
          </div>
          
          <div class="line-item">
            <div class="line-color line-blue"></div>
            <div>
              <strong>Línea inclinada azul →</strong> Ingresos totales (aumentan con las ventas)
            </div>
          </div>
          
          <div style="margin-top: 20px; background: #fff3cd; padding: 15px; border-radius: 8px; border-left: 4px solid #f59e0b;">
            <strong>Ejes del gráfico:</strong><br>
            • <strong>Eje X (horizontal):</strong> Cantidad de productos vendidos<br>
            • <strong>Eje Y (vertical):</strong> Dinero ($)
          </div>
          
          <div style="margin-top: 20px; padding: 15px; background: #e8f5e9; border-radius: 8px; text-align: center;">
            <strong>✨ PUNTO DE EQUILIBRIO ✨</strong><br>
            Es el punto donde la <strong>línea verde (costos totales)</strong> y la <strong>línea azul (ingresos totales)</strong> se cruzan.<br>
            <strong>Antes del punto:</strong> Pérdidas (zona roja)<br>
            <strong>Después del punto:</strong> Ganancias (zona verde)
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Funciones para los popups
    function openPopup(popupId) {
      document.getElementById(popupId).style.display = "block";
    }

    function closePopup(popupId) {
      document.getElementById(popupId).style.display = "none";
    }

    // Cerrar popups al hacer clic fuera del contenido
    window.onclick = function(event) {
      if (event.target.classList.contains('popup')) {
        event.target.style.display = "none";
      }
    }

    // Cerrar popups con ESC
    document.addEventListener('keydown', function(event) {
      if (event.key === 'Escape') {
        document.querySelectorAll('.popup').forEach(popup => {
          popup.style.display = "none";
        });
      }
    });
  </script>
</body>
</html>